extern fn printf(fmt: cstr, args: va_arg): i32;

fn print_person(p: Person): void {
    printf("p = %d, %s\n", *p.age.i, p.name);
}

fn change_person_name_ptr(p: *Person, str: cstr): void {
    p.name = str;
}

fn change_person_name_copy(p: Person, str: cstr): void {
    p.name = str;
}

struct Hello {
    i: *i32;
}

struct Person {
    age: *Hello;
    name: cstr = "sussy";
}

fn main(): i32 {
    i := 20;

    age := {
        i = ^i,
    } as Hello;

    p := {
        age = ^age,
    } as Person;

    if ^i == p.age.i {
        printf("%p, %d\n", p.age.i, *p.age.i);
    }

    print_person(p);
    change_person_name_ptr(^p, "mad");
    print_person(p);
    change_person_name_copy(p, "baka");
    print_person(p);

    return 0;
}
